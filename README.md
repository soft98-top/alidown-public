# alidown-public
该项目发布alidown可执行文件，目前有windows和mac版本。

QQ群：775916840

## 0x00 Init

解压之后直接在命令行中调用alidown2，检测没有配置文件，自动生成。

然后可以使用命令远端加载，-p是指定密码，后续可能会变更，--code是设置内测码。

```bash
alidown2 -t https://alidown.mllmmllm.ml -p alidown --code <your-code>
```

## 0x01 Usage

**-u/--url \<url\> ** 需要下载的分享链接

**-s/--sid \<share_id\>** 需要下载的share_id

**-sp/--spwd \<pwd\>** 需要下载的分享链接密码

**-f/--fid \<file_id\>** 需要下载的file_id

**-q/--query \<keyword\>** 搜索分享链接中的文件，配合-u或-s使用，会列举出符合的文件，根据输入的索引下载，输入all全部下载（需要内测码）

**--select** 选择下载文件，加上后会将文件夹下的文件列举出来，根据输入的索引下载，输入all全部下载

**--folder \<folder_path\>** 指定文件保存的位置，设置的目录要确保存在

**-v** 查看客户端配置信息

**-t/--target \<server_address\>** 指定服务器地址，自动获取配置信息

**-p/--pwd \<pwd\>** 获取远程配置信息时，配置链接密码，需要结合-t参数使用

**--code \<your_code\>** 获取远程配置信息时，配置内测码，需要结合-t参数使用

**-ti/---tindex \<index\>** 根据索引切换已配置的服务器地址列表

**-n \<thread_count\>** 分段并发下载数,，默认为20

**--chunk \<chunk_digit\>** 分段大小数字部分，默认为300

**-ct/--chunktype \<chunk_unit\>** 分段大小单位部分，可选B, KB, MB, 默认为KB

**--retry \<retry_count\>** 文件下载失败重试次数，默认为5，超过重试次数后下载下一个文件

**--timeout \<timeout\>** 下载链接连接超时时间, 默认为10, 单位为秒

**--proxy \<http_proxy_address\>** 设置代理，用于连接远程服务器，不会用于下载阿里云盘文件， 默认为空

## 0x02 How to get code

目前搜索分享链接内的内容是内测功能，需要内测码，后续可能增加其他内测功能，主要看发展程度，但一般正常功能就够用了，下面说一下如何获取内测码，目前有三种方式。

### 1 提供阿里云盘账号refresh_roken

因为alidown的原理是将云盘账号挂在服务端，然后通过客户端将分享链接发送到服务端，服务端再使用阿里云盘的接口去获取下载链接传回给客户端下载，但是如果出现很多用户同时调用可能会出现调用错误，所以后端挂的账号越多，理论上能支持更多用户的使用。

存在的隐患就是，提供的阿里云盘登录凭证实际上可以访问到网盘内部的文件，当然我保证不会去访问，但是告诉你确实有这个能力，所以如果你想通过这种方式，请尽量确保是没有隐私文件或者平时不用的账号。

获取refres_token的方法：

- 打开https://www.aliyundrive.com/drive，进行登录
- 按F12或者方法打开开发者工具
- 在开发者工具的Console/控制台面板输入`JSON.parse(localStorage.token).refresh_token`
- 将输出的字符串复制发给我，验证无误后会生成code发给你

![image-20230714210810599](./assets/image-20230714210810599.png)

### 2 加入知识星球

加入我创建的知识星球，我会给你发内测码，目前就是设置了优惠券，知识星球这个网站要求券后价格最低25，手续费5，我能收到的就是20，费用的话就是会用在后期的服务器或者其他项目开发，如果有内测功能，知识星球成员都可以第一时间使用。

![星球优惠券](./assets/星球优惠券.png)

### 3 直接赞助

也可以选择直接赞助，金额是有要求的，最低10元，满20元，可以联系我把你拉入知识星球，费用会用在后期的服务器或者其他项目开发，只要是赞助10元及以上就可以联系我获取内测码。

![IMG_3842](./assets/IMG_3842.JPG)
